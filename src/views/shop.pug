extends _partials/layout

block scripts
  script(src=cdnUrl + "/button.js")

block content
  each item in items
    .p-4.flex.flex-nowrap.items-center
      p.font-medium.mr-4 !{item.amount}x
      img(src=item.image).w-20.h-20.object-cover.rounded.drop-shadow-lg
      p.font-medium.mx-4.grow !{item.name}
      p.font-medium.mx-4.w-20 !{item.price_total} €

  .border.mb-4
  .p-4.flex.flex-col.justify-end.items-end.column
    p.mx-4.mb-2 Subtotal 91.18 € 
    p.mx-4.mb-2 Shipping !{shipping} €
    p.font-medium.mx-4.mb-6 Total !{total} € 

    form(method="POST" action="/checkout")
      button(type="submit" style={'background': '#79B061;'}).ivy-checkout-button.mt-4

    script.
      function onClick() { 
        //fetch('/checkout', { method: 'POST' })
        //.then(response => response.json())
        //.then(
        createPopupWin('http://localhost:4200/', 'Ivy Checkout', 490, 550)
       }

    //div
    //  button(type='button' onclick='onClick()' data-cart-value="119.97" data-shop-category="5999" data-locale="en" style={'background': '#79B061;', 'margin-bottom': '200'}).ivy-checkout-button.mt-4

    script.
      function createPopupWin(pageURL, pageTitle,
                      popupWinWidth, popupWinHeight) {
              var left = (screen.width - popupWinWidth) / 2;
              var top = (screen.height - popupWinHeight) / 3;
              
              var myWindow = window.open(pageURL, pageTitle,
                      'resizable=yes, width=' + popupWinWidth
                      + ', height=' + popupWinHeight + ', top='
                      + top + ', left=' + left);
      }

  div
    img.ui.mini.image(src='https://upload.wikimedia.org/wikipedia/commons/0/09/Bits_%26_Pretzels_logo.svg' style={'margin-top': '0px'}).w-20.h-20
    p(style={'margin-top': '0px', 'margin-bottom': '50px', 'font': '10px'}) Ivy is official payment partner at the Bits n Pretzels. Check us out at the event.

